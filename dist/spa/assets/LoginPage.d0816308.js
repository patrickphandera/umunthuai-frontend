import{Q as a,a as p}from"./QForm.29d0362d.js";import{Q as n}from"./QInput.213b8e1c.js";import{Q as u}from"./QBtn.8f5a2437.js";import{Q as c}from"./QCard.23ce42ae.js";import{Q as f}from"./QPage.5da164b8.js";import{b as g}from"./auth.service.621c6e84.js";import{o as m,c as d,w as s,b as r,e as _,a0 as h,d as b,t as w,K as x}from"./index.fa63e990.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.cfad1ba5.js";const y={data(){return{username:"",password:"",error:!1,errormsg:""}},methods:{goToRegister(){this.$router.push("/auth/register")},async login(){try{const t={phone:this.username,password:this.password},e=await g(t);e.role==="user"?this.$router.push("/admin"):e?this.$router.push("/chat"):this.errormsg="Your account fails to login"}catch(t){this.error=!0,console.log(t),this.errormsg=t.response.data.error||"Login failed. Please try again.",console.error("Login failed:",this.errormsg)}}}};function V(t,e,v,L,o,i){return m(),d(f,{class:"flex flex-center"},{default:s(()=>[r(c,{class:"q-card"},{default:s(()=>[r(a,{class:"text-center"},{default:s(()=>e[2]||(e[2]=[_("div",{class:"text-h6"},"Lowani",-1)])),_:1}),r(a,null,{default:s(()=>[r(p,{onSubmit:h(i.login,["prevent"])},{default:s(()=>[r(n,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l),label:"Nambala",outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),r(n,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=l=>o.password=l),label:"Pasiwedi",type:"password",outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),r(u,{label:"Lowani",type:"submit",color:"primary",class:"full-width q-mb-md"})]),_:1},8,["onSubmit"])]),_:1}),r(a,{class:"text-center"},{default:s(()=>[r(u,{flat:"",label:"Mulibe akawunti? Lembesani",onClick:i.goToRegister},null,8,["onClick"])]),_:1}),o.error?(m(),d(a,{key:0,class:"text-negative text-center"},{default:s(()=>[b(w(o.errormsg),1)]),_:1})):x("",!0)]),_:1})]),_:1})}var D=Q(y,[["render",V],["__scopeId","data-v-1d5acff3"]]);export{D as default};
