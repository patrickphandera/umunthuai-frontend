import{i as H,j as F,m as $,d as k,k as K,R as j,n as O,o as U,b as E,Q as T}from"./QBtn.8ae4fc3a.js";import{u as G,a as J}from"./use-dark.f0dbb48e.js";import{i as z,f as r,j as A,h as m,q as W,z as X,A as B,r as V,H as Y,B as g,x as Z,C as ee,o as q,c as R,w as S,e as M,P as N,Q as te,R as ae,K as se,b as C,S as ne,U as ie,d as re,t as I}from"./index.d5656e80.js";import{Q as oe}from"./QInput.111b42bc.js";import{Q as le}from"./QResizeObserver.e516ae11.js";import{Q as ue}from"./QPage.37769804.js";import{a as ce,p as de}from"./auth.service.a740dc46.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";const fe={xs:8,sm:10,md:14,lg:20,xl:24};var ve=z({name:"QChip",props:{...G,...H,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:c}){const{proxy:{$q:d}}=A(),t=J(e,d),o=F(e,fe),i=r(()=>e.selected===!0||e.icon!==void 0),f=r(()=>e.selected===!0?e.iconSelected||d.iconSet.chip.selected:e.icon),v=r(()=>e.iconRemove||d.iconSet.chip.remove),h=r(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),_=r(()=>{const a=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(a?` text-${a} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(h.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),b=r(()=>{const a=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},y={...a,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||d.lang.label.remove};return{chip:a,remove:y}});function w(a){a.keyCode===13&&p(a)}function p(a){e.disable||(c("update:selected",!e.selected),c("click",a))}function x(a){(a.keyCode===void 0||a.keyCode===13)&&(W(a),e.disable===!1&&(c("update:modelValue",!1),c("remove")))}function l(){const a=[];h.value===!0&&a.push(m("div",{class:"q-focus-helper"})),i.value===!0&&a.push(m(k,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const y=e.label!==void 0?[m("div",{class:"ellipsis"},[e.label])]:void 0;return a.push(m("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},K(n.default,y))),e.iconRight&&a.push(m(k,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&a.push(m(k,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:v.value,...b.value.remove,onClick:x,onKeyup:x})),a}return()=>{if(e.modelValue===!1)return;const a={class:_.value,style:o.value};return h.value===!0&&Object.assign(a,b.value.chip,{onClick:p,onKeyup:w}),$("div",a,l(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[j,e.ripple]])}}});const he='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>';var ge=z({name:"QSpinnerDots",props:O,setup(e){const{cSize:n,classes:c}=U(e);return()=>m("svg",{class:c.value,fill:"currentColor",width:n.value,height:n.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:he})}}),be=z({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:c}){const{proxy:{$q:d}}=A(),t=X(ee,B);if(t===B)return console.error("QFooter needs to be child of QLayout"),B;const o=V(parseInt(e.heightHint,10)),i=V(!0),f=V(Y.value===!0||t.isContainer.value===!0?0:window.innerHeight),v=r(()=>e.reveal===!0||t.view.value.indexOf("F")!==-1||d.platform.is.ios&&t.isContainer.value===!0),h=r(()=>t.isContainer.value===!0?t.containerHeight.value:f.value),_=r(()=>{if(e.modelValue!==!0)return 0;if(v.value===!0)return i.value===!0?o.value:0;const s=t.scroll.value.position+h.value+o.value-t.height.value;return s>0?s:0}),b=r(()=>e.modelValue!==!0||v.value===!0&&i.value!==!0),w=r(()=>e.modelValue===!0&&b.value===!0&&e.reveal===!0),p=r(()=>"q-footer q-layout__section--marginal "+(v.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(b.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(v.value!==!0?" hidden":""):"")),x=r(()=>{const s=t.rows.value.bottom,u={};return s[0]==="l"&&t.left.space===!0&&(u[d.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),s[2]==="r"&&t.right.space===!0&&(u[d.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),u});function l(s,u){t.update("footer",s,u)}function a(s,u){s.value!==u&&(s.value=u)}function y({height:s}){a(o,s),l("size",s)}function P(){if(e.reveal!==!0)return;const{direction:s,position:u,inflectionPoint:D}=t.scroll.value;a(i,s==="up"||u-D<100||t.height.value-h.value-u-o.value<300)}function L(s){w.value===!0&&a(i,!0),c("focusin",s)}g(()=>e.modelValue,s=>{l("space",s),a(i,!0),t.animate()}),g(_,s=>{l("offset",s)}),g(()=>e.reveal,s=>{s===!1&&a(i,e.modelValue)}),g(i,s=>{t.animate(),c("reveal",s)}),g([o,t.scroll,t.height],P),g(()=>d.screen.height,s=>{t.isContainer.value!==!0&&a(f,s)});const Q={};return t.instances.footer=Q,e.modelValue===!0&&l("size",o.value),l("space",e.modelValue),l("offset",_.value),Z(()=>{t.instances.footer===Q&&(t.instances.footer=void 0,l("size",0),l("offset",0),l("space",!1))}),()=>{const s=E(n.default,[m(le,{debounce:0,onResize:y})]);return e.elevated===!0&&s.push(m("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),m("footer",{class:p.value,style:x.value,onFocusin:L},s)}}});const ye="http://127.0.0.1:5000";let _e=localStorage.getItem("token");async function pe(e){try{return(await ce.get(`${ye}/${e}`,{headers:{Authorization:`Bearer ${_e}`}})).data}catch(n){throw console.error("Request error:",n),n}}const xe={data(){return{msgSent:!1,userMessage:"",messages:[{sender:"system",text:"Takulandilani! ndikuthandizeni chani lero? "}]}},methods:{async sendMessage(){if(this.userMessage.trim()){await this.messages.push({sender:"user",text:this.userMessage.trim()}),this.msgSent=!0;let e=await de({message:this.userMessage,user_id:"gdgd"},"chat");this.userMessage="",this.msgSent=!1,this.botResponse(e.response)}},botResponse(e){this.messages.push({sender:"system",text:e})}},async created(){try{let e=await pe("chat");Array.isArray(e)&&e.forEach(n=>{n.message&&n.response&&(this.messages.push({sender:"user",text:n.message.trim()}),this.messages.push({sender:"system",text:n.response}))})}catch(e){console.error("Error fetching chats:",e)}}},qe={class:"messages-container q-pa-md"},Se={class:"message-text q-mt-xs"},Ce={class:"q-ma-md"};function we(e,n,c,d,t,o){return q(),R(ue,{class:"chat-page bg-grey-2"},{default:S(()=>[M("div",qe,[(q(!0),N(ae,null,te(t.messages,(i,f)=>(q(),N("div",{key:f,class:ie(["message",i.sender==="user"?"system-message":"user-message"])},[C(ve,{color:i.sender==="user"?"grey-5":"primary","text-color":"white"},{default:S(()=>[re(I(i.sender==="user"?"Ine":"UmunthuAI"),1)]),_:2},1032,["color"]),M("div",Se,I(i.text),1)],2))),128)),t.msgSent?(q(),R(ge,{key:0,color:"blue",size:"lg",class:"q-mx-sm"})):se("",!0)]),C(be,{class:"chat-input-footer bg-white q-pa-sm row items-center justify-between"},{default:S(()=>[C(oe,{outlined:"",modelValue:t.userMessage,"onUpdate:modelValue":n[0]||(n[0]=i=>t.userMessage=i),type:"textarea",dense:"",placeholder:"Lembani funso lanu umu....",class:"input-box",onKeyup:ne(o.sendMessage,["enter"])},{append:S(()=>[M("div",Ce,[C(T,{unelevated:"",color:"primary",class:"q-mt-md",icon:"navigation",onClick:o.sendMessage},null,8,["onClick"])])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1})}var Ie=me(xe,[["render",we],["__scopeId","data-v-7e20d0b6"]]);export{Ie as default};
